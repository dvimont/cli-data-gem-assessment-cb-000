#!/usr/bin/env ruby

require_relative '../config/environment'

puts "*** BUILDING CATALOG OF AUDIOBOOKS! ***"
optional_parm = "&id=7926" # get explicit audiobook webpage for development/testing
CatalogBuilder.build(2) # 10000, optional_parm)
# Audiobook.list_all
puts "LANGUAGES (" + Language.all.size.to_s + "):"
Language.all.sorted_hash.each{|key, language|
  puts language.id.to_s
  puts language.audiobooks_by_title.sorted_hash.size.to_s + " audiobooks in this language."
  language.audiobooks_by_title.sorted_hash.each{|title, audiobook| puts "  " + title + " " + audiobook.id}
}
puts "=====\nAudiobook count: " + Audiobook.all.size.to_s
